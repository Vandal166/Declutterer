<Window
    Height="900"
    Icon="/Assets/favicon.ico"
    Title="Declutterer"
    Width="1400"
    WindowStartupLocation="CenterScreen"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d"
    x:Class="Declutterer.UI.Views.MainWindow"
    x:DataType="viewModels:MainWindowViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:avalonia="clr-namespace:LoadingIndicators.Avalonia;assembly=LoadingIndicators.Avalonia"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:viewModels="clr-namespace:Declutterer.UI.ViewModels"
    xmlns:views="clr-namespace:Declutterer.UI.Views"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Window.Resources>
        <StreamGeometry x:Key="home_regular">M21.6062 5.85517C23.0048 4.71494 24.9952 4.71494 26.3938 5.85517L39.5688 16.5966C40.4736 17.3342 41 18.4492 41 19.628V39.1134C41 41.2599 39.2875 43 37.175 43H32.075C29.9625 43 28.25 41.2599 28.25 39.1134V29.7492C28.25 29.0337 27.6792 28.4536 26.975 28.4536H21.025C20.3208 28.4536 19.75 29.0337 19.75 29.7492V39.1134C19.75 41.2599 18.0375 43 15.925 43H10.825C8.71251 43 7 41.2599 7 39.1134V19.628C7 18.4493 7.52645 17.3342 8.43124 16.5966L21.6062 5.85517ZM24.7979 7.87612C24.3317 7.49604 23.6683 7.49604 23.2021 7.87612L10.0271 18.6175C9.72548 18.8634 9.55 19.2351 9.55 19.628V39.1134C9.55 39.8289 10.1208 40.4089 10.825 40.4089H15.925C16.6292 40.4089 17.2 39.8289 17.2 39.1134V29.7492C17.2 27.6027 18.9125 25.8626 21.025 25.8626H26.975C29.0875 25.8626 30.8 27.6027 30.8 29.7492V39.1134C30.8 39.8289 31.3708 40.4089 32.075 40.4089H37.175C37.8792 40.4089 38.45 39.8289 38.45 39.1134V19.628C38.45 19.2351 38.2745 18.8634 37.9729 18.6175L24.7979 7.87612Z</StreamGeometry>
        <StreamGeometry x:Key="options_regular">M8.75 13.5C10.2862 13.5 11.5735 14.5658 11.9126 15.9983L21.25 16C21.6642 16 22 16.3358 22 16.75C22 17.1297 21.7178 17.4435 21.3518 17.4932L21.25 17.5L11.9129 17.5007C11.5741 18.9337 10.2866 20 8.75 20C7.21345 20 5.92594 18.9337 5.58712 17.5007L2.75 17.5C2.33579 17.5 2 17.1642 2 16.75C2 16.3703 2.28215 16.0565 2.64823 16.0068L2.75 16L5.58712 15.9993C5.92594 14.5663 7.21345 13.5 8.75 13.5ZM8.75 15C7.98586 15 7.33611 15.4898 7.09753 16.1725L7.07696 16.2352L7.03847 16.3834C7.01326 16.5016 7 16.6242 7 16.75C7 16.9048 7.02011 17.055 7.05785 17.1979L7.09766 17.3279L7.12335 17.3966C7.38055 18.0431 8.01191 18.5 8.75 18.5C9.51376 18.5 10.1632 18.0107 10.4021 17.3285L10.4422 17.1978L10.4251 17.2581C10.4738 17.0973 10.5 16.9267 10.5 16.75C10.5 16.6452 10.4908 16.5425 10.4731 16.4428L10.4431 16.3057L10.4231 16.2353L10.3763 16.1024C10.1188 15.4565 9.48771 15 8.75 15ZM15.25 4C16.7866 4 18.0741 5.06632 18.4129 6.49934L21.25 6.5C21.6642 6.5 22 6.83579 22 7.25C22 7.6297 21.7178 7.94349 21.3518 7.99315L21.25 8L18.4129 8.00066C18.0741 9.43368 16.7866 10.5 15.25 10.5C13.7134 10.5 12.4259 9.43368 12.0871 8.00066L2.75 8C2.33579 8 2 7.66421 2 7.25C2 6.8703 2.28215 6.55651 2.64823 6.50685L2.75 6.5L12.0874 6.49833C12.4265 5.06582 13.7138 4 15.25 4ZM15.25 5.5C14.4859 5.5 13.8361 5.98976 13.5975 6.6725L13.577 6.73515L13.5385 6.88337C13.5133 7.0016 13.5 7.12425 13.5 7.25C13.5 7.40483 13.5201 7.55497 13.5579 7.69794L13.5977 7.82787L13.6234 7.89664C13.8805 8.54307 14.5119 9 15.25 9C16.0138 9 16.6632 8.51073 16.9021 7.82852L16.9422 7.69781L16.9251 7.75808C16.9738 7.59729 17 7.4267 17 7.25C17 7.14518 16.9908 7.0425 16.9731 6.94275L16.9431 6.80565L16.9231 6.73529L16.8763 6.60236C16.6188 5.95647 15.9877 5.5 15.25 5.5Z</StreamGeometry>
        <StreamGeometry x:Key="history_regular">M12,3 C16.9705627,3 21,7.02943725 21,12 C21,16.9705627 16.9705627,21 12,21 C10.2903875,21 8.64944804,20.5217936 7.23080614,19.6337823 C6.65294072,19.2720624 6.11769706,18.8456754 5.63566512,18.3635872 C5.15289898,17.8807646 4.72601217,17.3445768 4.36400875,16.7656632 C3.47740079,15.3478054 3,13.7081751 3,12 C3,11.725846 3.01227986,11.4530822 3.03669655,11.1822711 C3.07389172,10.769731 3.43847425,10.4654537 3.85101443,10.5026489 C4.2635546,10.5398441 4.56783184,10.9044266 4.53063667,11.3169668 C4.51025648,11.5430081 4.5,11.7708281 4.5,12 C4.5,13.4248663 4.89726709,14.7892778 5.63582603,15.9703766 C5.93763522,16.4530279 6.2936779,16.9002326 6.69638725,17.3029889 C7.09848441,17.7051331 7.54490219,18.0607594 8.02668093,18.362333 C9.20843557,19.1020627 10.5739361,19.5 12,19.5 C16.1421356,19.5 19.5,16.1421356 19.5,12 C19.5,7.85786438 16.1421356,4.5 12,4.5 C9.60270786,4.5 7.39952516,5.63281093 5.99774512,7.50196302 L8.75418677,7.50209339 C9.16840034,7.50209339 9.50418677,7.83787982 9.50418677,8.25209339 C9.50418677,8.63178915 9.22203289,8.94558435 8.85595733,8.99524677 L8.75418677,9.00209339 L4.25,9.00209339 C3.87030423,9.00209339 3.55650904,8.71993951 3.50684662,8.35386394 L3.5,8.25209339 L3.5,3.75209339 C3.5,3.33787982 3.83578644,3.00209339 4.25,3.00209339 C4.62969577,3.00209339 4.94349096,3.28424727 4.99315338,3.65032283 L5,3.75209339 L4.99900166,6.34348083 C6.68586937,4.25603382 9.23627771,3 12,3 Z M11.25,7 C11.6295,7 11.9434583,7.28233333 11.9931493,7.64827431 L12,7.75 L12,12 L14.25,12 C14.664,12 15,12.336 15,12.75 C15,13.1295 14.7176667,13.4434583 14.3517257,13.4931493 L14.25,13.5 L11.25,13.5 C10.8705,13.5 10.5565417,13.2176667 10.5068507,12.8517257 L10.5,12.75 L10.5,7.75 C10.5,7.336 10.836,7 11.25,7 Z</StreamGeometry>
        <StreamGeometry x:Key="question_regular">M24 5.5C18.4796 5.5 14 9.97964 14 15.5C14 16.1904 14.5596 16.75 15.25 16.75C15.9404 16.75 16.5 16.1904 16.5 15.5C16.5 11.3604 19.8604 8 24 8C28.1396 8 31.5 11.3604 31.5 15.5C31.5 17.3754 31.0292 18.4403 30.3989 19.2446C29.889 19.8954 29.2935 20.3788 28.5509 20.9815C28.2472 21.2281 27.9187 21.4947 27.5615 21.8009C26.3916 22.8037 25.1534 24.0676 24.2301 26.0903C23.3147 28.0953 22.75 30.7533 22.75 34.5V34.75C22.75 35.4404 23.3096 36 24 36C24.6904 36 25.25 35.4404 25.25 34.75V34.5C25.25 30.9967 25.779 28.7172 26.5043 27.1285C27.2216 25.5574 28.1709 24.5713 29.1885 23.6991C29.4213 23.4995 29.6744 23.2943 29.9373 23.0811C30.7553 22.4179 31.669 21.6771 32.3667 20.7866C33.377 19.4972 34 17.8746 34 15.5C34 9.97964 29.5204 5.5 24 5.5Z M24 42C24.8284 42 25.5 41.3284 25.5 40.5C25.5 39.6716 24.8284 39 24 39C23.1716 39 22.5 39.6716 22.5 40.5C22.5 41.3284 23.1716 42 24 42Z</StreamGeometry>

        <StreamGeometry x:Key="folder_regular">M17.0606622,9 C17.8933043,9 18.7000032,9.27703406 19.3552116,9.78392956 L19.5300545,9.92783739 L22.116207,12.1907209 C22.306094,12.356872 22.5408581,12.4608817 22.7890575,12.4909364 L22.9393378,12.5 L40.25,12.5 C42.2542592,12.5 43.8912737,14.0723611 43.994802,16.0508414 L44,16.25 L44,35.25 C44,37.2542592 42.4276389,38.8912737 40.4491586,38.994802 L40.25,39 L7.75,39 C5.74574083,39 4.10872626,37.4276389 4.00519801,35.4491586 L4,35.25 L4,12.75 C4,10.7457408 5.57236105,9.10872626 7.55084143,9.00519801 L7.75,9 L17.0606622,9 Z M22.8474156,14.9988741 L20.7205012,17.6147223 C20.0558881,18.4327077 19.0802671,18.9305178 18.0350306,18.993257 L17.8100737,19 L6.5,18.999 L6.5,35.25 C6.5,35.8972087 6.99187466,36.4295339 7.62219476,36.4935464 L7.75,36.5 L40.25,36.5 C40.8972087,36.5 41.4295339,36.0081253 41.4935464,35.3778052 L41.5,35.25 L41.5,16.25 C41.5,15.6027913 41.0081253,15.0704661 40.3778052,15.0064536 L40.25,15 L22.8474156,14.9988741 Z M17.0606622,11.5 L7.75,11.5 C7.10279131,11.5 6.5704661,11.9918747 6.50645361,12.6221948 L6.5,12.75 L6.5,16.499 L17.8100737,16.5 C18.1394331,16.5 18.4534488,16.3701335 18.6858203,16.1419575 L18.7802162,16.0382408 L20.415,14.025 L17.883793,11.8092791 C17.693906,11.643128 17.4591419,11.5391183 17.2109425,11.5090636 L17.0606622,11.5 Z</StreamGeometry>

        <StreamGeometry x:Key="folder_open_regular">M20 9.50195V8.74985C20 7.50721 18.9926 6.49985 17.75 6.49985H12.0247L9.64368 4.51995C9.23959 4.18393 8.73063 3.99997 8.20509 3.99997H4.24957C3.00724 3.99997 2 5.00686 1.99957 6.24919L1.99561 17.7492C1.99518 18.9921 3.00266 20 4.24561 20H4.27196C4.27607 20 4.28019 20 4.28431 20H18.4693C19.2723 20 19.9723 19.4535 20.167 18.6745L21.9169 11.6765C22.1931 10.5719 21.3577 9.50195 20.2192 9.50195H20ZM4.24957 5.49997H8.20509C8.38027 5.49997 8.54993 5.56129 8.68462 5.6733L11.2741 7.82652C11.4088 7.93852 11.5784 7.99985 11.7536 7.99985H17.75C18.1642 7.99985 18.5 8.33563 18.5 8.74985V9.50195H6.42385C5.39136 9.50195 4.49137 10.2047 4.241 11.2064L3.49684 14.1837L3.49957 6.24971C3.49971 5.8356 3.83546 5.49997 4.24957 5.49997ZM5.69623 11.5701C5.77969 11.2362 6.07969 11.002 6.42385 11.002H20.2192C20.3819 11.002 20.5012 11.1548 20.4617 11.3126L18.7119 18.3107C18.684 18.4219 18.584 18.5 18.4693 18.5H4.28431C4.12167 18.5 4.00233 18.3472 4.04177 18.1894L5.69623 11.5701Z</StreamGeometry>
    </Window.Resources>
    <Design.DataContext>
        <!--
            This only sets the DataContext for the previewer in an IDE,
            to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs)
        -->
        <viewModels:MainWindowViewModel />
    </Design.DataContext>


    <Grid ColumnDefinitions="Auto,*" RowDefinitions="*,Auto">
        <!--  LEFT SIDEBAR  -->
        <Border
            Background="#F5F5F5"
            Grid.Column="0"
            Grid.Row="0"
            Grid.RowSpan="2"
            MinWidth="200"
            Padding="15,20"
            VerticalAlignment="Top">
            <StackPanel Orientation="Vertical" Spacing="20">

                <!--  Logo/Title  -->
                <StackPanel
                    HorizontalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="10"
                    VerticalAlignment="Center">
                    <Path
                        Data="{StaticResource folder_open_regular}"
                        Fill="#333333"
                        Height="25"
                        Stretch="Uniform"
                        VerticalAlignment="Center"
                        Width="25" />
                    <TextBlock
                        FontSize="18"
                        FontWeight="SemiBold"
                        Foreground="#333333"
                        Text="Declutterer" />
                </StackPanel>

                <!--  GitHub Profile Button  -->
                <StackPanel Orientation="Vertical" Spacing="40">
                    <HyperlinkButton
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="#333333"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Margin="10,0"
                        NavigateUri="https://github.com/Vandal166"
                        Padding="0">
                        <StackPanel
                            Orientation="Horizontal"
                            Spacing="10"
                            VerticalAlignment="Center">
                            <Path
                                Data="M7.5,1C3.36,1,0,4.36,0,8.5c0,3.32,2.14,6.13,5.11,7.13c0.37,0.07,0.51,-0.16,0.51,-0.36c0,-0.18,-0.01,-0.77,-0.01,-1.39c-2.08,0.45,-2.52,-0.5,-2.68,-0.96c-0.08,-0.21,-0.42,-0.96,-0.72,-1.15c-0.25,-0.14,-0.6,-0.48,-0.01,-0.49c0.56,-0.01,0.96,0.52,1.09,0.74c0.64,1.08,1.67,0.77,2.08,0.59c0.07,-0.46,0.25,-0.77,0.45,-0.95c-1.66,-0.19,-3.41,-0.83,-3.41,-3.7c0,-0.82,0.29,-1.49,0.77,-2.01c-0.08,-0.19,-0.34,-0.97,0.07,-2.02c0,0,0.63,-0.2,2.07,0.77c0.6,-0.17,1.24,-0.25,1.88,-0.25c0.64,0,1.28,0.09,1.88,0.25c1.44,-0.97,2.07,-0.77,2.07,-0.77c0.41,1.05,0.15,1.83,0.07,2.02c0.48,0.52,0.77,1.19,0.77,2.01c0,2.87,-1.75,3.51,-3.41,3.7c0.26,0.22,0.49,0.65,0.49,1.31c0,0.95,-0.01,1.71,-0.01,1.94c0,0.2,0.14,0.43,0.51,0.36C12.86,14.63,15,11.82,15,8.5C15,4.36,11.64,1,7.5,1z"
                                Fill="#333333"
                                Height="22"
                                Stretch="Uniform"
                                VerticalAlignment="Center"
                                Width="22" />
                            <TextBlock
                                FontStyle="Normal"
                                Padding="0"
                                Text="Author"
                                TextDecorations="{x:Null}"
                                VerticalAlignment="Center" />
                        </StackPanel>
                    </HyperlinkButton>
                </StackPanel>

                <Separator
                    Background="#CCCCCC"
                    Height="1"
                    Margin="0" />

                <!--  Navigation Buttons  -->
                <StackPanel Orientation="Vertical" Spacing="8">
                    <Button
                        Background="Transparent"
                        BorderThickness="0"
                        Command="{Binding ClearAllCommand}"
                        Foreground="#333333"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="12,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Path
                                Data="{StaticResource home_regular}"
                                Fill="#333333"
                                Height="15"
                                Stretch="Uniform"
                                VerticalAlignment="Center"
                                Width="15" />
                            <TextBlock Text="Home" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>

                    <Button
                        Background="Transparent"
                        BorderThickness="0"
                        Command="{Binding ShowScanOptionsWindowCommand}"
                        Foreground="#333333"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="12,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Path
                                Data="{StaticResource options_regular}"
                                Fill="#333333"
                                Height="15"
                                Stretch="Uniform"
                                VerticalAlignment="Center"
                                Width="15" />
                            <TextBlock Text="Scan Settings" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>

                    <Button
                        Background="Transparent"
                        BorderThickness="0"
                        Command="{Binding ShowHistoryInlineCommand}"
                        Foreground="#333333"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="12,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Path
                                Data="{StaticResource history_regular}"
                                Fill="#333333"
                                Height="15"
                                Stretch="Uniform"
                                VerticalAlignment="Center"
                                Width="15" />
                            <TextBlock Text="History" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>

                    <Button
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="#999999"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        IsEnabled="False"
                        Padding="12,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Path
                                Data="{StaticResource question_regular}"
                                Fill="#999999"
                                Height="15"
                                Stretch="Uniform"
                                VerticalAlignment="Center"
                                Width="15" />
                            <TextBlock Text="Help" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <Separator
                    Background="#CCCCCC"
                    Height="1"
                    Margin="0,10" />

                <!--  Quick Stats  -->
                <StackPanel Orientation="Vertical" Spacing="12">
                    <TextBlock
                        FontSize="12"
                        FontWeight="SemiBold"
                        Foreground="#666666"
                        Text="Scan Info" />

                    <StackPanel Orientation="Vertical" Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Foreground="#888888"
                            Text="Roots Scanned:" />
                        <TextBlock
                            FontSize="13"
                            FontWeight="Bold"
                            Foreground="#333333"
                            Text="{Binding Roots.Count}" />
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Spacing="4">
                        <TextBlock
                            FontSize="11"
                            Foreground="#888888"
                            Text="Items Selected:" />
                        <TextBlock
                            FontSize="13"
                            FontWeight="Bold"
                            Foreground="#333333"
                            Text="{Binding SelectedNodes.Count}" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <!--  MAIN CONTENT AREA  -->
        <Grid
            ColumnDefinitions="*"
            Grid.Column="1"
            Grid.Row="0"
            Margin="10">

            <!--  Main Scanner/Tree View  -->
            <Panel IsVisible="{Binding !IsHistoryVisible}">
                <!--  TreeDataGrid with hierarchical display  -->
                <TreeDataGrid
                    Foreground="{Binding IsAnyNodeLoading, Converter={StaticResource BooleanToBrushConverter}}"
                    Grid.Row="0"
                    IsVisible="{Binding IsTreeDataGridVisible}"
                    Margin="0"
                    Source="{Binding Roots}"
                    x:Name="TreeDataGrid" />

                <!--  No Children Found Message  -->
                <StackPanel
                    HorizontalAlignment="Center"
                    IsVisible="{Binding NoChildrenFound}"
                    Orientation="Vertical"
                    Spacing="16"
                    VerticalAlignment="Center">

                    <!--  Icon  -->
                    <Path
                        Data="{StaticResource folder_regular}"
                        Fill="#FFA500"
                        Stretch="Uniform"
                        VerticalAlignment="Center"
                        Width="64" />

                    <!--  Main Heading  -->
                    <TextBlock
                        FontSize="24"
                        FontWeight="SemiBold"
                        Foreground="#333333"
                        HorizontalAlignment="Center"
                        Text="No matches found" />

                    <!--  Subtitle  -->
                    <TextBlock
                        FontSize="13"
                        Foreground="#666666"
                        HorizontalAlignment="Center"
                        Text="No files or folders matched your scan criteria."
                        TextAlignment="Center" />

                    <TextBlock
                        FontSize="13"
                        Foreground="#666666"
                        HorizontalAlignment="Center"
                        Text="Try adjusting your filters and scanning again."
                        TextAlignment="Center" />

                    <!--  Action Button  -->
                    <Button
                        Background="CornflowerBlue"
                        Command="{Binding ShowScanOptionsWindowCommand}"
                        Content="Try Different Scan Settings"
                        FontSize="14"
                        HorizontalAlignment="Center"
                        Padding="20,10,20,10" />
                </StackPanel>

                <!--  Empty State - Hero Action  -->
                <StackPanel
                    HorizontalAlignment="Center"
                    IsVisible="{Binding Roots.Count, Converter={StaticResource ZeroToBooleanConverter}}"
                    Orientation="Vertical"
                    Spacing="20"
                    VerticalAlignment="Center">

                    <!--  Icon  -->
                    <Path
                        Data="{StaticResource folder_open_regular}"
                        Fill="Black"
                        Stretch="Uniform"
                        VerticalAlignment="Center"
                        Width="72" />
                    <!--  Main Heading  -->
                    <TextBlock
                        FontSize="28"
                        FontWeight="SemiBold"
                        Foreground="#333333"
                        HorizontalAlignment="Center"
                        Text="Ready to declutter?" />

                    <!--  Subtitle  -->
                    <TextBlock
                        FontSize="14"
                        Foreground="#666666"
                        HorizontalAlignment="Center"
                        Text="Select directories to scan and find unused files and folders"
                        TextAlignment="Center" />

                    <!--  Hero Action Button  -->
                    <Button
                        Background="CornflowerBlue"
                        Command="{Binding ShowScanOptionsWindowCommand}"
                        Content="Start New Scan"
                        FontSize="16"
                        HorizontalAlignment="Center"
                        Padding="24,12,24,12" />

                    <!--  Quick Tips Section  -->
                    <StackPanel
                        HorizontalAlignment="Center"
                        Margin="0,20,0,0"
                        Orientation="Vertical"
                        Spacing="8">
                        <TextBlock
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="#999999"
                            Text="Quick Tips:" />
                        <TextBlock
                            FontSize="11"
                            Foreground="#888888"
                            Text="• Select one or more folders to analyze" />
                        <TextBlock
                            FontSize="11"
                            Foreground="#888888"
                            Text="• Filter by size, type, and age" />
                        <TextBlock
                            FontSize="11"
                            Foreground="#888888"
                            Text="• Review and safely delete unwanted entries" />
                    </StackPanel>
                </StackPanel>

                <!--  Loading Spinner  -->
                <avalonia:LoadingIndicator
                    Height="100"
                    HorizontalAlignment="Center"
                    IsActive="{Binding IsAnyNodeLoading}"
                    Mode="Arc"
                    SpeedRatio="1.2"
                    VerticalAlignment="Center"
                    Width="100" />
            </Panel>

            <!--  History View  -->
            <Panel
                HorizontalAlignment="Stretch"
                IsVisible="{Binding IsHistoryVisible}"
                VerticalAlignment="Stretch">
                <views:HistoryView DataContext="{Binding HistoryViewModel}" />
            </Panel>
        </Grid>

        <!--  BOTTOM SELECTION SUMMARY BAR  -->
        <Border
            Background="#2C3E50"
            BorderBrush="#BDC3C7"
            BorderThickness="0,1,0,0"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Grid.Row="1"
            IsVisible="{Binding Roots.Count, Converter={StaticResource GreaterThanZeroToBooleanConverter}}"
            Padding="15,12"
            VerticalAlignment="Bottom">
            <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto" HorizontalAlignment="Stretch">

                <!--  Selection Summary Text  -->
                <TextBlock
                    FontSize="14"
                    Foreground="White"
                    Grid.Column="1"
                    VerticalAlignment="Center">
                    <Run FontWeight="Bold" Text="{Binding SelectedNodes.Count}" />
                    <Run Text=" items selected (" />
                    <Run FontWeight="Bold" Text="{Binding SelectedNodesSizeText}" />
                    <Run Text=")" />
                </TextBlock>

                <!--  Deselect All Button  -->
                <Button
                    Background="White"
                    Command="{Binding DeselectAllCommand}"
                    Content="Deselect All"
                    FontSize="13"
                    Grid.Column="2"
                    HorizontalAlignment="Left"
                    IsVisible="{Binding SelectedNodes.Count, Converter={StaticResource GreaterThanZeroToBooleanConverter}}"
                    Margin="0,0,8,0"
                    Padding="16,8" />

                <!--  Select All Button  -->
                <Button
                    Background="White"
                    Command="{Binding SelectAllCommand}"
                    Content="Select All"
                    FontSize="13"
                    Grid.Column="2"
                    HorizontalAlignment="Left"
                    IsVisible="{Binding SelectedNodes.Count, Converter={StaticResource EqualToZeroToBooleanConverter}}"
                    Margin="0,0,8,0"
                    Padding="16,8" />

                <!--  Smart Select Button  -->
                <Button
                    Background="White"
                    Command="{Binding SmartSelectCommand}"
                    Content="Smart Select"
                    FontSize="13"
                    Grid.Column="3"
                    HorizontalAlignment="Left"
                    Margin="0,0,8,0"
                    Padding="16,8" />

                <!--  Review & Cleanup Button  -->
                <Button
                    Background="CornflowerBlue"
                    Command="{Binding ShowCleanupWindowCommand}"
                    Content="Review &amp; Cleanup"
                    FontSize="13"
                    Foreground="Black"
                    Grid.Column="4"
                    HorizontalAlignment="Right"
                    IsEnabled="{Binding SelectedNodes.Count, Converter={StaticResource GreaterThanZeroToBooleanConverter}}"
                    Name="ReviewCleanupButton"
                    Padding="16,8">
                    <Button.Styles>
                        <Style Selector="Button#ReviewCleanupButton:disabled /template/ ContentPresenter#PART_ContentPresenter">
                            <Setter Property="Foreground" Value="Gray" />
                        </Style>
                    </Button.Styles>
                </Button>
            </Grid>
        </Border>
    </Grid>


</Window>
